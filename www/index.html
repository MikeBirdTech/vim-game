<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Vim Game</title>
  </head>
  <body>
    <h1>Vim Game</h1>
    <div id="game-area" tabindex="0">
      Click here and start typing (use h, j, k, l to move)
    </div>
    <div id="cursor-position">Cursor position: (0, 0)</div>
    <script type="module">
      import init, { VimGame } from "../pkg/vim_game.js";

      async function run() {
        await init();
        const game = new VimGame();
        const gameArea = document.getElementById("game-area");
        const cursorPosition = document.getElementById("cursor-position");

        gameArea.addEventListener("keydown", (event) => {
          event.preventDefault();
          const newPosition = game.process_keypress(event.key);
          cursorPosition.textContent = `Cursor position: ${newPosition}`;
          console.log(
            `Key pressed: ${event.key}, New position: ${newPosition}`
          );
        });
      }

      run();
    </script>
  </body>
</html>
